<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contactez-nous - LearnBall</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            light: '#4f46e5',
                            DEFAULT: '#4338ca',
                            dark: '#3730a3',
                        },
                        secondary: {
                            light: '#10b981',
                            DEFAULT: '#059669',
                            dark: '#047857',
                        }
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    <script>
        // Configure dark mode detection
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 text-gray-900 dark:text-white min-h-screen">
    {% include 'navbar.html' %}

    <div class="py-12 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
        <!-- En-tête amélioré -->
        <div class="text-center mb-16">
            <div class="inline-flex items-center justify-center mb-4">
                <div class="w-12 h-12 rounded-full bg-primary-light dark:bg-primary-dark flex items-center justify-center shadow-lg">
                    <i data-lucide="mail" class="h-6 w-6 text-white"></i>
                </div>
            </div>
            <h1 class="text-4xl sm:text-5xl font-bold text-gray-900 dark:text-white mb-4">
                Contactez-nous
            </h1>
            <p class="max-w-3xl mx-auto text-lg text-gray-600 dark:text-gray-300">
                Vous avez des questions, des commentaires ou des suggestions ? Notre équipe est là pour vous aider.
            </p>
        </div>

        <!-- Affichage des messages Flask Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="animate-fade-in bg-{{ 'green' if category == 'success' else 'red' }}-50 dark:bg-{{ 'green' if category == 'success' else 'red' }}-900/20 border border-{{ 'green' if category == 'success' else 'red' }}-200 dark:border-{{ 'green' if category == 'success' else 'red' }}-800 rounded-xl p-6 mb-6 max-w-3xl mx-auto">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <div class="h-10 w-10 rounded-full bg-{{ 'green' if category == 'success' else 'red' }}-100 dark:bg-{{ 'green' if category == 'success' else 'red' }}-900/30 flex items-center justify-center">
                                    <svg class="h-5 w-5 text-{{ 'green' if category == 'success' else 'red' }}-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        {% if category == 'success' %}
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                        {% else %}
                                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />
                                        {% endif %}
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-medium text-{{ 'green' if category == 'success' else 'red' }}-800 dark:text-{{ 'green' if category == 'success' else 'red' }}-200">
                                    {% if category == 'success' %}Message envoyé{% else %}Erreur{% endif %}
                                </h3>
                                <div class="mt-2 text-{{ 'green' if category == 'success' else 'red' }}-700 dark:text-{{ 'green' if category == 'success' else 'red' }}-300">
                                    <p>{{ message }}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16">
            <!-- Formulaire amélioré -->
            <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl">
                <div class="relative h-2 bg-gradient-to-r from-primary-light to-secondary-light"></div>
                <div class="p-8">
                    <div class="flex items-center mb-8">
                        <div class="p-2 rounded-lg bg-primary-light/10 dark:bg-primary-dark/20">
                            <i data-lucide="mail" class="h-6 w-6 text-primary-light dark:text-primary-dark"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 dark:text-white ml-3">
                            Écrivez-nous
                        </h2>
                    </div>
                    
                    <!-- Message de succès (JS uniquement, à conserver pour le fonctionnement JS) -->
                    <div id="success-message" class="hidden animate-fade-in bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl p-6 mb-6">
                        <div class="flex">
                            <div class="flex-shrink-0">
                                <div class="h-10 w-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
                                    <svg class="h-5 w-5 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                            </div>
                            <div class="ml-4">
                                <h3 class="text-lg font-medium text-green-800 dark:text-green-200">
                                    Message envoyé avec succès
                                </h3>
                                <div class="mt-2 text-green-700 dark:text-green-300">
                                    <p>
                                        Merci pour votre message ! Nous vous répondrons dans les plus brefs délais.
                                    </p>
                                </div>
                                <div class="mt-6">
                                    <button
                                        type="button"
                                        id="new-message-btn"
                                        class="inline-flex items-center px-4 py-2 border border-green-500 shadow-sm text-sm leading-4 font-medium rounded-lg text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/20 hover:bg-green-100 dark:hover:bg-green-900/40 focus:outline-none focus:ring-2 focus:ring-green-500"
                                    >
                                        Envoyer un autre message
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formulaire - Modification pour envoyer à la route Flask -->
                    <form id="contact-form" action="{{ url_for('main.contact') }}" method="POST" class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Nom complet <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="user" class="h-5 w-5 text-gray-400"></i>
                                </div>
                                <input
                                    type="text"
                                    id="name"
                                    name="name"
                                    class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-light focus:border-primary-light dark:bg-gray-700 dark:text-white dark:border-gray-600"
                                    placeholder="Votre nom"
                                />
                            </div>
                            <p class="mt-2 text-sm text-red-600 dark:text-red-400 error-message" data-for="name"></p>
                        </div>
                        
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Adresse email <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="mail" class="h-5 w-5 text-gray-400"></i>
                                </div>
                                <input
                                    type="email"
                                    id="email"
                                    name="email"
                                    class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-light focus:border-primary-light dark:bg-gray-700 dark:text-white dark:border-gray-600"
                                    placeholder="votre@email.com"
                                />
                            </div>
                            <p class="mt-2 text-sm text-red-600 dark:text-red-400 error-message" data-for="email"></p>
                        </div>
                        
                        <div>
                            <label for="subject" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Sujet <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i data-lucide="help-circle" class="h-5 w-5 text-gray-400"></i>
                                </div>
                                <select
                                    id="subject"
                                    name="subject"
                                    class="block w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-light focus:border-primary-light dark:bg-gray-700 dark:text-white dark:border-gray-600 appearance-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLWNoZXZyb24tZG93biI+PHBhdGggZD0ibTYgOSA2IDYgNi02Ii8+PC9zdmc+')] bg-no-repeat bg-[center_right_1rem]"
                                >
                                    <option value="">Sélectionnez un sujet</option>
                                    <option value="question">Question générale</option>
                                    <option value="feedback">Commentaires</option>
                                    <option value="suggestion">Suggestion</option>
                                    <option value="bug">Signaler un problème</option>
                                    <option value="other">Autre</option>
                                </select>
                            </div>
                            <p class="mt-2 text-sm text-red-600 dark:text-red-400 error-message" data-for="subject"></p>
                        </div>
                        
                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                                Message <span class="text-red-500">*</span>
                            </label>
                            <div class="relative">
                                <textarea
                                    id="message"
                                    name="message"
                                    rows="5"
                                    class="block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-primary-light focus:border-primary-light dark:bg-gray-700 dark:text-white dark:border-gray-600"
                                    placeholder="Dites-nous comment nous pouvons vous aider..."
                                ></textarea>
                            </div>
                            <p class="mt-2 text-sm text-red-600 dark:text-red-400 error-message" data-for="message"></p>
                        </div>
                        
                        <button
                            type="submit"
                            class="w-full flex justify-center items-center px-6 py-3 bg-gradient-to-r from-primary-light to-primary-dark hover:from-primary-dark hover:to-primary-dark text-white font-medium rounded-lg shadow-lg hover:shadow-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light transition-all duration-300"
                        >
                            <i data-lucide="send" class="h-5 w-5 mr-2"></i>
                            Envoyer le message
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Colonne droite améliorée - Aucun changement nécessaire-->
            <div class="space-y-8">
                <!-- FAQ améliorée -->
                <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl">
                    <div class="relative h-2 bg-gradient-to-r from-secondary-light to-green-400"></div>
                    <div class="p-8">
                        <div class="flex items-center mb-8">
                            <div class="p-2 rounded-lg bg-secondary-light/10 dark:bg-secondary-dark/20">
                                <i data-lucide="message-square" class="h-6 w-6 text-secondary-light dark:text-secondary-dark"></i>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white ml-3">
                                Foire aux Questions
                            </h2>
                        </div>
                        
                        <div class="space-y-6">
                            <div class="p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center">
                                    <i data-lucide="chevron-right" class="h-4 w-4 text-secondary-light dark:text-secondary-dark mr-2"></i>
                                    Qu'est-ce que LearnBall ?
                                </h3>
                                <p class="text-gray-600 dark:text-gray-300 pl-6">
                                    LearnBall est une plateforme éducative innovante qui utilise le football comme métaphore pour enseigner les mathématiques, la géographie et les langues de manière interactive et engageante.
                                </p>
                            </div>
                            
                            <div class="p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center">
                                    <i data-lucide="chevron-right" class="h-4 w-4 text-secondary-light dark:text-secondary-dark mr-2"></i>
                                    À qui s'adresse LearnBall ?
                                </h3>
                                <p class="text-gray-600 dark:text-gray-300 pl-6">
                                    LearnBall est conçu pour les élèves de tous âges qui aiment le football et souhaitent améliorer leurs compétences académiques de manière ludique. C'est également un excellent outil pour les enseignants qui cherchent à rendre l'apprentissage plus engageant.
                                </p>
                            </div>
                            
                            <div class="p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center">
                                    <i data-lucide="chevron-right" class="h-4 w-4 text-secondary-light dark:text-secondary-dark mr-2"></i>
                                    Les informations sont-elles exactes ?
                                </h3>
                                <p class="text-gray-600 dark:text-gray-300 pl-6">
                                    Oui, toutes les informations présentées sur LearnBall sont soigneusement vérifiées et mises à jour régulièrement. Nous travaillons avec des éducateurs et des experts du football pour garantir l'exactitude de notre contenu.
                                </p>
                            </div>
                            
                            <div class="p-4 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors duration-200">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-2 flex items-center">
                                    <i data-lucide="chevron-right" class="h-4 w-4 text-secondary-light dark:text-secondary-dark mr-2"></i>
                                    Comment puis-je suggérer de nouvelles fonctionnalités ?
                                </h3>
                                <p class="text-gray-600 dark:text-gray-300 pl-6">
                                    Nous sommes toujours à l'écoute de vos suggestions ! Utilisez le formulaire de contact ci-contre ou envoyez-nous un email à suggestions@learnball.edu (adresse fictive).
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- À propos amélioré -->
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-900/20 rounded-2xl shadow-xl overflow-hidden transition-all duration-300 hover:shadow-2xl">
                    <div class="p-8">
                        <div class="flex items-center mb-8">
                            <div class="p-2 rounded-lg bg-blue-100/50 dark:bg-blue-900/30">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-600 dark:text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                            </div>
                            <h2 class="text-2xl font-bold text-gray-900 dark:text-white ml-3">
                                À propos de nous
                            </h2>
                        </div>
                        
                        <div class="space-y-4">
                            <p class="text-gray-700 dark:text-gray-300">
                                LearnBall a été créé par une équipe d'éducateurs passionnés et de fans de football qui croient au pouvoir de l'apprentissage contextuel et de l'engagement émotionnel dans l'éducation.
                            </p>
                            
                            <p class="text-gray-700 dark:text-gray-300">
                                Notre mission est de rendre l'apprentissage des matières académiques aussi passionnant que de regarder un match de football, en créant des connexions significatives entre le sport et les connaissances scolaires.
                            </p>
                            
                            <div class="pt-4">
                                <div class="flex space-x-4">
                                    <div class="flex-shrink-0 animate-float">
                                        <div class="h-12 w-12 rounded-full bg-primary-light/10 dark:bg-primary-dark/20 flex items-center justify-center">
                                            <i data-lucide="graduation-cap" class="h-6 w-6 text-primary-light dark:text-primary-dark"></i>
                                        </div>
                                    </div>
                                    <div class="flex-shrink-0 animate-float" style="animation-delay: 0.5s">
                                        <div class="h-12 w-12 rounded-full bg-secondary-light/10 dark:bg-secondary-dark/20 flex items-center justify-center">
                                            <i data-lucide="users" class="h-6 w-6 text-secondary-light dark:text-secondary-dark"></i>
                                        </div>
                                    </div>
                                    <div class="flex-shrink-0 animate-float" style="animation-delay: 1s">
                                        <div class="h-12 w-12 rounded-full bg-blue-100/50 dark:bg-blue-900/30 flex items-center justify-center">
                                            <i data-lucide="trophy" class="h-6 w-6 text-blue-600 dark:text-blue-400"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('contact-form');
            const successMessage = document.getElementById('success-message');
            const newMessageBtn = document.getElementById('new-message-btn');
            const errorMessages = document.querySelectorAll('.error-message');
            
            // Function to validate form
            function validateForm() {
                let isValid = true;
                const formData = new FormData(form);
                const errors = {};
                
                // Clear previous error messages
                errorMessages.forEach(errorMsg => {
                    errorMsg.textContent = '';
                    const inputName = errorMsg.getAttribute('data-for');
                    const inputField = document.getElementById(inputName);
                    if (inputField) {
                        inputField.classList.remove('border-red-500');
                        inputField.classList.add('border-gray-300');
                    }
                });
                
                // Validate name
                const name = formData.get('name').trim();
                if (!name) {
                    errors.name = 'Le nom est requis';
                    isValid = false;
                }
                
                // Validate email
                const email = formData.get('email').trim();
                if (!email) {
                    errors.email = 'L\'email est requis';
                    isValid = false;
                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    errors.email = 'Format d\'email invalide';
                    isValid = false;
                }
                
                // Validate subject
                const subject = formData.get('subject').trim();
                if (!subject) {
                    errors.subject = 'Le sujet est requis';
                    isValid = false;
                }
                
                // Validate message
                const message = formData.get('message').trim();
                if (!message) {
                    errors.message = 'Le message est requis';
                    isValid = false;
                }
                
                // Display error messages
                if (!isValid) {
                    Object.keys(errors).forEach(field => {
                        const errorMsg = document.querySelector(`.error-message[data-for="${field}"]`);
                        if (errorMsg) {
                            errorMsg.textContent = errors[field];
                            const inputField = document.getElementById(field);
                            if (inputField) {
                                inputField.classList.remove('border-gray-300');
                                inputField.classList.add('border-red-500');
                            }
                        }
                    });
                }
                
                return isValid;
            }
            
            // Event listener for form submission - modifié pour permettre la soumission au backend
            form.addEventListener('submit', function(e) {
                // Empêcher l'envoi uniquement si la validation échoue
                if (!validateForm()) {
                    e.preventDefault();
                }
                // Si la validation réussit, le formulaire est envoyé normalement à la route Flask
            });
            
            // Event listener for sending another message
            newMessageBtn.addEventListener('click', function() {
                successMessage.classList.add('hidden');
                form.classList.remove('hidden');
            });
            
            // Event listeners for input fields to clear errors on input
            const inputFields = form.querySelectorAll('input, select, textarea');
            inputFields.forEach(field => {
                field.addEventListener('input', function() {
                    const errorMsg = document.querySelector(`.error-message[data-for="${field.id}"]`);
                    if (errorMsg) {
                        errorMsg.textContent = '';
                        field.classList.remove('border-red-500');
                        field.classList.add('border-gray-300');
                    }
                });
            });
        });
    </script>
</body>
</html>